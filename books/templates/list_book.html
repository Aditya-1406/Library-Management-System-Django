{% extends 'base.html' %}

{% block title %}
Innova Library
{% endblock %}

{% block content %}

<h3 class="mt-4 mx-3">Library Books</h3>
<hr>

<div class="container mt-4">

    <div class="row">

        {% for book in books %}
        <div class="col-lg-2 col-md-3 col-sm-4 col-6 mb-4">

            <div class="card h-100 shadow-sm position-relative">

                {% if forloop.counter <= 5 %}
                <span class="badge bg-danger position-absolute top-0 end-0 m-2">NEW</span>
                {% endif %}

                {% if book.image %}
                <img src="{{ book.image.url }}"
                     class="card-img-top"
                     loading="lazy"
                     style="height: 180px; object-fit: cover;"
                     alt="{{ book.title }}">
                {% else %}
                <img src="https://via.placeholder.com/150"
                     class="card-img-top"
                     loading="lazy"
                     style="height: 180px; object-fit: cover;">
                {% endif %}

                <div class="card-body p-2">
                    <h6 class="card-title mb-1">{{ book.title }}</h6>
                    <small class="text-muted">{{ book.author.name }}</small><br>
                    <small>Copies: {{ book.available_copies }}</small><br>
                    <small class="text-muted">{{ book.published_date }}</small>
                </div>

            </div>

        </div>
        {% empty %}
        <p class="text-center">No books available.</p>
        {% endfor %}

    </div>

    <!-- Pagination -->
    <div class="d-flex justify-content-center mt-4">
        {% if books.has_previous %}
        <a href="?page={{ books.previous_page_number }}" class="btn btn-outline-primary mx-1">Previous</a>
        {% endif %}

        <span class="mx-2">Page {{ books.number }} of {{ books.paginator.num_pages }}</span>

        {% if books.has_next %}
        <a href="?page={{ books.next_page_number }}" class="btn btn-outline-primary mx-1">Next</a>
        {% endif %}
    </div>

</div>

{% endblock %}
